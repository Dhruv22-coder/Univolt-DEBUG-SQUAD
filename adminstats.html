<section class="cyber-panel p-6 rounded-3xl mt-8">
    <h2 class="text-orange-500 font-black uppercase text-xs tracking-[0.3em] mb-6 neon-text">Pending Alumni Approvals</h2>
    <div id="pending-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        </div>
</section>

<script>
    // Fetch pending alumni on load
    async function loadPendingUsers() {
        const res = await fetch('http://localhost:5000/api/admin/pending');
        const users = await res.json();
        const container = document.getElementById('pending-list');
        
        if (users.length === 0) {
            container.innerHTML = <p class="text-zinc-500 text-xs italic">No pending requests in queue.</p>;
            return;
        }

        container.innerHTML = users.map(user => `
            <div class="bg-zinc-900 border border-zinc-800 p-4 rounded-xl flex justify-between items-center">
                <div>
                    <p class="font-bold text-white">${user.username}</p>
                    <p class="text-[10px] text-zinc-500 uppercase">Status: PENDING</p>
                </div>
                <button onclick="approveUser('${user._id}')" class="bg-orange-500 text-black text-[10px] font-black px-3 py-1 rounded hover:bg-orange-400 transition">
                    APPROVE
                </button>
            </div>
        `).join('');
    }

    async function approveUser(userId) {
        const res = await fetch(`http://localhost:5000/api/admin/approve/${userId}`, {
            method: 'PATCH'
        });
        if (res.ok) {
            alert("Protocol Updated: User Approved.");
            loadPendingUsers(); // Refresh list
        }
    }

    // Initialize
    loadPendingUsers();
</script>